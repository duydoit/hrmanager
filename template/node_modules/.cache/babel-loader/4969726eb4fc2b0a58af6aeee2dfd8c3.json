{"ast":null,"code":"import _objectSpread from\"C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import Pagination from'../../components/pagination/Pagination';import{useAlert}from'react-alert';import{useForm}from\"react-hook-form\";import{useSelector,useDispatch}from\"react-redux\";import TableView from\"../../components/table/tableView\";import{Link}from\"react-router-dom\";import{fetchAccounts}from\"../../redux/actions/accountActions\";import{deleteAccount}from'../../redux/actions/accountActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AccountPage(){var alert=useAlert();var dispatch=useDispatch();useEffect(function(){dispatch(fetchAccounts());},[]);var accList=useSelector(function(state){return state.accounts.list;});var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var _useState=useState({\"type-search\":\"username\",\"value-search\":\"\"}),_useState2=_slicedToArray(_useState,2),keySearch=_useState2[0],setKeySearch=_useState2[1];var onSubmit=function onSubmit(data){return setKeySearch(data);};var listSearch=searchItems(accList);console.log(listSearch);function searchItems(data){return data.filter(function(item){return item[keySearch[\"type-search\"]].toString().toLowerCase().indexOf(keySearch[\"value-search\"].toLowerCase())>-1;});}// Get current list\nvar _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),amountPerPage=_useState6[0],setAmountPerPage=_useState6[1];var indexOfLastPage=currentPage*amountPerPage;var indexOfFirstPage=indexOfLastPage-amountPerPage;var currentList=listSearch.slice(indexOfFirstPage,indexOfLastPage);var totalPages=listSearch.length;var handlesPaginate=function handlesPaginate(number){return setCurrentPage(number);};var handlesAmountItem=function handlesAmountItem(value){return setAmountPerPage(value);};// columns table\nvar columns=[{title:\"Trạng thái\",dataIndex:\"id\",key:\"id\"},{title:\"Tên đăng nhập\",dataIndex:\"username\",key:\"username\",render:function render(ojb){return/*#__PURE__*/_jsx(Link,{to:\"/account/\".concat(ojb.id,\"/detail\"),className:\"text-blue-500 hover:text-blue-700\",children:ojb.username});}},{title:\"Email\",dataIndex:\"email\",key:\"email\"},{title:\"Phần quyền\",dataIndex:\"role\",key:\"role\"},{title:\"\",dataIndex:\"control\",key:\"control\",render:function render(ojb){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){alert.show(\"B\\u1EA1n c\\xF3 mu\\u1ED1n xo\\xE1 t\\xE0i kho\\u1EA3n n\\xE0y n\\xE0y !\",{title:\"Xoá tài khoản\",closeCopy:\"Huỷ\",actions:[{copy:\"Đồng ý\",onClick:function onClick(){return dispatch(deleteAccount(ojb.id));}}]});},className:\"text-sm font-medium text-white px-2.5 mx-1 py-1.5 bg-rose-500 hover:bg-rose-600\",children:\"Xo\\xE1\"})});}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-white flex items-center \",children:/*#__PURE__*/_jsx(Link,{to:\"/account/create\",className:\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\",children:\"T\\u1EA1o M\\u1EDBi\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white mt-5  w-full container mx-auto rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" border-b px-5 py-3 border-gray-300\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-medium text-violet-600\",children:\"T\\xE0i kho\\u1EA3n\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"flex items-center px-5 w-full mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full border-gray-300 rounded divide-gray-300 divide-x border mr-3\",children:[/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({className:\"px-3 py-1 rounded-l w-44 focus:outline-violet-500\"},register(\"type-search\")),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"username\",children:\"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(\"option\",{value:\"id\",children:\"M\\xE3 t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"email\",children:\"Email\"})]})),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"w-full px-3 py-1 rounded-r focus:outline-violet-500 \"},register(\"value-search\")))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"font-medium text-sm w-28 mx-2 text-white px-2.5 py-1.5 bg-violet-500 hover:bg-violet-600\",children:\"T\\xECm ki\\u1EBFm\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){setKeySearch({\"type-search\":\"name\",\"value-search\":\"\"});reset({\"value-search\":\"\"});},className:\"font-medium text-sm w-28 mx-2 px-2.5 py-1.5 bg-gray-100 border hover:bg-gray-200\",children:\"\\u0110\\u1EB7t l\\u1EA1i\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-6\",id:\"content-employee-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-5 text-2xl text-gray-700 font-medium\",children:[totalPages,\" T\\xE0i kho\\u1EA3n\"]}),/*#__PURE__*/_jsx(TableView,{datas:currentList,columns:columns}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Pagination,{amountPerPage:amountPerPage,currentPage:currentPage,totalPages:totalPages,paginate:handlesPaginate,amountItem:handlesAmountItem})})]})]})]});}export default AccountPage;","map":{"version":3,"sources":["C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/src/pages/account/AccountPage.js"],"names":["useEffect","useState","Pagination","useAlert","useForm","useSelector","useDispatch","TableView","Link","fetchAccounts","deleteAccount","AccountPage","alert","dispatch","accList","state","accounts","list","register","handleSubmit","reset","keySearch","setKeySearch","onSubmit","data","listSearch","searchItems","console","log","filter","item","toString","toLowerCase","indexOf","currentPage","setCurrentPage","amountPerPage","setAmountPerPage","indexOfLastPage","indexOfFirstPage","currentList","slice","totalPages","length","handlesPaginate","number","handlesAmountItem","value","columns","title","dataIndex","key","render","ojb","id","username","show","closeCopy","actions","copy","onClick"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Pagination from '../../components/pagination/Pagination'\r\nimport { useAlert } from 'react-alert'\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport TableView from \"../../components/table/tableView\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { fetchAccounts } from \"../../redux/actions/accountActions\";\r\nimport { deleteAccount } from '../../redux/actions/accountActions'\r\nfunction AccountPage() {\r\n    const alert = useAlert()\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(fetchAccounts());\r\n    }, []);\r\n    const accList = useSelector(state => state.accounts.list)\r\n    const { register, handleSubmit, reset } = useForm()\r\n    const [keySearch, setKeySearch] = useState({ \"type-search\": \"username\", \"value-search\": \"\" })\r\n\r\n    const onSubmit = data => setKeySearch(data)\r\n    const listSearch = searchItems(accList)\r\n    console.log(listSearch)\r\n    function searchItems(data) {\r\n        return data.filter((item) =>\r\n            item[keySearch[\"type-search\"]].toString().toLowerCase().indexOf(keySearch[\"value-search\"].toLowerCase()) > -1\r\n        )\r\n    }\r\n    // Get current list\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [amountPerPage, setAmountPerPage] = useState(10)\r\n    const indexOfLastPage = currentPage * amountPerPage\r\n    const indexOfFirstPage = indexOfLastPage - amountPerPage\r\n    const currentList = listSearch.slice(indexOfFirstPage, indexOfLastPage)\r\n    const totalPages = listSearch.length\r\n    const handlesPaginate = (number) => setCurrentPage(number)\r\n    const handlesAmountItem = (value) => setAmountPerPage(value)\r\n    // columns table\r\n    const columns = [\r\n        {\r\n            title: \"Trạng thái\",\r\n            dataIndex: \"id\",\r\n            key: \"id\",\r\n        },\r\n        {\r\n            title: \"Tên đăng nhập\",\r\n            dataIndex: \"username\",\r\n            key: \"username\",\r\n            render: (ojb) => (\r\n                <Link to={`/account/${ojb.id}/detail`} className=\"text-blue-500 hover:text-blue-700\" >\r\n                    {ojb.username}\r\n                </Link>\r\n            )\r\n        },\r\n        {\r\n            title: \"Email\",\r\n            dataIndex: \"email\",\r\n            key: \"email\",\r\n        },\r\n        {\r\n            title: \"Phần quyền\",\r\n            dataIndex: \"role\",\r\n            key: \"role\",\r\n        },\r\n        {\r\n            title: \"\",\r\n            dataIndex: \"control\",\r\n            key: \"control\",\r\n            render: (ojb) => (\r\n                <div className=\"flex justify-end\">\r\n                    <button\r\n                        onClick={() => {\r\n                            alert.show(`Bạn có muốn xoá tài khoản này này !`, {\r\n                                title: \"Xoá tài khoản\",\r\n                                closeCopy: \"Huỷ\",\r\n                                actions: [\r\n                                    {\r\n                                        copy: \"Đồng ý\",\r\n                                        onClick: () => dispatch(deleteAccount(ojb.id)),\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }}\r\n                        className=\"text-sm font-medium text-white px-2.5 mx-1 py-1.5 bg-rose-500 hover:bg-rose-600\" >Xoá</button>\r\n                </div>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"font-medium text-gray-700\">\r\n            {/* Header */}\r\n            <div className=\"h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\">\r\n                <div className=\"text-white flex items-center \">\r\n                    <Link to='/account/create'\r\n                        className=\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\"\r\n                    >\r\n                        Tạo Mới\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n            <div className=\"bg-white mt-5  w-full container mx-auto rounded shadow-md\">\r\n                <div className=\" border-b px-5 py-3 border-gray-300\">\r\n                    <span className=\"text-xl font-medium text-violet-600\">Tài khoản</span>\r\n                </div>\r\n                {/* search */}\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"flex items-center px-5 w-full mt-5\">\r\n                    <div className=\"flex w-full border-gray-300 rounded divide-gray-300 divide-x border mr-3\">\r\n                        <select className=\"px-3 py-1 rounded-l w-44 focus:outline-violet-500\"  {...register(\"type-search\")}>\r\n                            <option value=\"username\">Tên đăng nhập</option>\r\n                            <option value=\"id\">Mã tài khoản</option>\r\n                            <option value=\"email\">Email</option>\r\n                        </select>\r\n                        <input type=\"text\" className=\"w-full px-3 py-1 rounded-r focus:outline-violet-500 \"  {...register(\"value-search\")} />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"font-medium text-sm w-28 mx-2 text-white px-2.5 py-1.5 bg-violet-500 hover:bg-violet-600\">Tìm kiếm</button>\r\n                    <button type=\"button\" onClick={() => { setKeySearch({ \"type-search\": \"name\", \"value-search\": \"\" }); reset({ \"value-search\": \"\" }) }} className=\"font-medium text-sm w-28 mx-2 px-2.5 py-1.5 bg-gray-100 border hover:bg-gray-200\">Đặt lại</button>\r\n                </form>\r\n\r\n                <div className=\"px-5 py-6\" id=\"content-employee-list\">\r\n                    <div className=\"px-2 pb-5 text-2xl text-gray-700 font-medium\">\r\n                        {totalPages} Tài khoản\r\n                    </div>\r\n                    <TableView datas={currentList} columns={columns} />\r\n                    <div className=\"mt-4\">\r\n                        <Pagination\r\n                            amountPerPage={amountPerPage}\r\n                            currentPage={currentPage}\r\n                            totalPages={totalPages}\r\n                            paginate={handlesPaginate}\r\n                            amountItem={handlesAmountItem}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountPage"]},"metadata":{},"sourceType":"module"}