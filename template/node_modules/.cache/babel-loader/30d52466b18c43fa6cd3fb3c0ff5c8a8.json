{"ast":null,"code":"import _slicedToArray from\"C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\anhdu\\\\OneDrive\\\\Desktop\\\\HrManager\\\\hrmanager\\\\template\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from'react';import{Link}from'react-router-dom';import Pagination from'../../components/pagination/Pagination';import{useSelector,useDispatch}from\"react-redux\";import{fetchDerpartments}from\"../../redux/actions/departmentAction\";import html2canvas from'html2canvas';import jsPDF from'jspdf';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DepartmentPage(){var departmentList=useSelector(function(state){return state.departments.list;});var dispatch=useDispatch();useEffect(function(){var fetchList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchDerpartments());case 1:case\"end\":return _context.stop();}}},_callee);}));return function fetchList(){return _ref.apply(this,arguments);};}();fetchList();},[]);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),amountPerPage=_useState4[0],setAmountPerPage=_useState4[1];// Get current list\nvar indexOfLastPage=currentPage*amountPerPage;var indexOfFirstPage=indexOfLastPage-amountPerPage;var currentList=departmentList.slice(indexOfFirstPage,indexOfLastPage);var totalPages=departmentList.length;var handlesPaginate=function handlesPaginate(number){return setCurrentPage(number);};var handlesAmountItem=function handlesAmountItem(value){return setAmountPerPage(value);};var handlerExportPDF=function handlerExportPDF(){var input=document.getElementById('content-department');html2canvas(input).then(function(canvas){var imgData=canvas.toDataURL('img/png');var pdf=new jsPDF('l','px','a4');pdf.addImage(imgData,'PNG',1,1);pdf.save(\"list-department.pdf\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-white flex items-center \",children:[/*#__PURE__*/_jsx(Link,{to:\"create\",className:\" bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\",children:\"T\\u1EA1o m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlerExportPDF,className:\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\",children:\"Xu\\u1EA5t PDF\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white mt-5  w-full container mx-auto rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" border-b px-5 py-3 border-gray-300\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl text-violet-600\",children:\"Ph\\xF2ng Ban\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-6\",id:\"content-department\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-5 text-2xl text-gray-700\",children:[totalPages,\" Ph\\xF2ng ban\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"grid grid-cols-4 gap-10 text-white\",children:currentList.map(function(item){return/*#__PURE__*/_jsx(\"li\",{className:\"w-64 divide-y bg-gray-100 shadow\",children:/*#__PURE__*/_jsxs(Link,{to:\"\".concat(item.id,\"/detail\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-500 text-lg px-3 py-2 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(item.status?\"bg-green-400\":\"bg-rose-500\",\" inline-flex rounded-full h-4 w-4 \")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-800 font-normal px-3 py-2 flex justify-between\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:item.phone}),\"  \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-800 font-normal px-3 py-2 flex justify-between\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:\"S\\u1ED1 l\\u01B0\\u1EE3ng nh\\xE2n vi\\xEAn\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:item.count}),\"  \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-800 font-normal px-3 py-2 flex justify-between\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:\"Qu\\u1EA3n l\\xFD\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:item.department_name}),\"  \"]})]})},item.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Pagination,{amountPerPage:amountPerPage,currentPage:currentPage,totalPages:totalPages,paginate:handlesPaginate,amountItem:handlesAmountItem})})]})]})]});}export default DepartmentPage;","map":{"version":3,"sources":["C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/src/pages/department/DepartmentPage.js"],"names":["useEffect","useState","Link","Pagination","useSelector","useDispatch","fetchDerpartments","html2canvas","jsPDF","DepartmentPage","departmentList","state","departments","list","dispatch","fetchList","currentPage","setCurrentPage","amountPerPage","setAmountPerPage","indexOfLastPage","indexOfFirstPage","currentList","slice","totalPages","length","handlesPaginate","number","handlesAmountItem","value","handlerExportPDF","input","document","getElementById","then","canvas","imgData","toDataURL","pdf","addImage","save","map","item","id","name","status","phone","count","department_name"],"mappings":"qcAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wCAAvB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,iBAAT,KAAkC,sCAAlC,CACA,MAAOC,CAAAA,WAAP,KAAwB,aAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,cAAT,EAA0B,CACxB,GAAMC,CAAAA,cAAc,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,WAAN,CAAkBC,IAAtB,EAAN,CAAlC,CACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACAL,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,SAAS,0FAAG,mIAChBD,QAAQ,CAACR,iBAAiB,EAAlB,CAAR,CADgB,sDAAH,kBAATS,CAAAA,SAAS,0CAAf,CAGAA,SAAS,GACV,CALQ,CAKN,EALM,CAAT,CAMA,cAAsCd,QAAQ,CAAC,CAAD,CAA9C,wCAAOe,WAAP,eAAoBC,cAApB,eACA,eAA0ChB,QAAQ,CAAC,EAAD,CAAlD,yCAAOiB,aAAP,eAAsBC,gBAAtB,eACA;AACA,GAAMC,CAAAA,eAAe,CAAGJ,WAAW,CAAGE,aAAtC,CACA,GAAMG,CAAAA,gBAAgB,CAAGD,eAAe,CAAGF,aAA3C,CACA,GAAMI,CAAAA,WAAW,CAAGZ,cAAc,CAACa,KAAf,CAAqBF,gBAArB,CAAuCD,eAAvC,CAApB,CACA,GAAMI,CAAAA,UAAU,CAAGd,cAAc,CAACe,MAAlC,CACA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,QAAYV,CAAAA,cAAc,CAACU,MAAD,CAA1B,EAAxB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,QAAWV,CAAAA,gBAAgB,CAACU,KAAD,CAA3B,EAA1B,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAMC,CAAAA,KAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAAd,CACA1B,WAAW,CAACwB,KAAD,CAAX,CACGG,IADH,CACQ,SAACC,MAAD,CAAY,CAChB,GAAMC,CAAAA,OAAO,CAAGD,MAAM,CAACE,SAAP,CAAiB,SAAjB,CAAhB,CACA,GAAMC,CAAAA,GAAG,CAAG,GAAI9B,CAAAA,KAAJ,CAAU,GAAV,CAAe,IAAf,CAAqB,IAArB,CAAZ,CACA8B,GAAG,CAACC,QAAJ,CAAaH,OAAb,CAAsB,KAAtB,CAA6B,CAA7B,CAAgC,CAAhC,EACAE,GAAG,CAACE,IAAJ,CAAS,qBAAT,EACD,CANH,EAOD,CATD,CAUA,mBACE,aAAK,SAAS,CAAC,aAAf,wBAEE,YAAK,SAAS,CAAC,8FAAf,uBACE,aAAK,SAAS,CAAC,+BAAf,wBACE,KAAC,IAAD,EACE,EAAE,CAAC,QADL,CAEE,SAAS,CAAC,oDAFZ,+BADF,cAOE,eACE,OAAO,CAAEV,gBADX,CAEE,SAAS,CAAC,+DAFZ,2BAPF,GADF,EAFF,cAoBE,aAAK,SAAS,CAAC,2DAAf,wBACE,YAAK,SAAS,CAAC,qCAAf,uBACE,aAAM,SAAS,CAAC,yBAAhB,0BADF,EADF,cAIE,aAAK,SAAS,CAAC,WAAf,CAA2B,EAAE,CAAC,oBAA9B,wBACE,aAAK,SAAS,CAAC,kCAAf,WACGN,UADH,mBADF,cAIE,WAAI,SAAS,CAAC,oCAAd,UACGF,WAAW,CAACmB,GAAZ,CAAgB,SAAAC,IAAI,CAAI,CACvB,mBACE,WAAkB,SAAS,CAAC,kCAA5B,uBACE,MAAC,IAAD,EAAM,EAAE,WAAKA,IAAI,CAACC,EAAV,WAAR,wBACE,aAAK,SAAS,CAAC,iEAAf,wBACE,sBAAOD,IAAI,CAACE,IAAZ,EADF,cAEE,aAAM,SAAS,WAAKF,IAAI,CAACG,MAAL,CAAc,cAAd,CAA+B,aAApC,sCAAf,EAFF,GADF,cAKE,aAAK,SAAS,CAAC,0DAAf,4BAA2E,2DAA3E,kBAAsG,sBAAOH,IAAI,CAACI,KAAZ,EAAtG,QALF,cAME,aAAK,SAAS,CAAC,0DAAf,4BAA2E,iEAA3E,kBAA2G,sBAAOJ,IAAI,CAACK,KAAZ,EAA3G,QANF,cAOE,aAAK,SAAS,CAAC,0DAAf,4BAA2E,yCAA3E,kBAAgG,sBAAOL,IAAI,CAACM,eAAZ,EAAhG,QAPF,GADF,EAASN,IAAI,CAACC,EAAd,CADF,CAaD,CAdA,CADH,EAJF,cAsBE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,UAAD,EACE,aAAa,CAAEzB,aADjB,CAEE,WAAW,CAAEF,WAFf,CAGE,UAAU,CAAEQ,UAHd,CAIE,QAAQ,CAAEE,eAJZ,CAKE,UAAU,CAAEE,iBALd,EADF,EAtBF,GAJF,GApBF,GADF,CA6DD,CAED,cAAenB,CAAAA,cAAf","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Pagination from '../../components/pagination/Pagination'\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { fetchDerpartments } from \"../../redux/actions/departmentAction\"\r\nimport html2canvas from 'html2canvas';\r\nimport jsPDF from 'jspdf';\r\n\r\nfunction DepartmentPage() {\r\n  const departmentList = useSelector(state => state.departments.list)\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    const fetchList = async () => {\r\n      dispatch(fetchDerpartments());\r\n    }\r\n    fetchList()\r\n  }, []);\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [amountPerPage, setAmountPerPage] = useState(10)\r\n  // Get current list\r\n  const indexOfLastPage = currentPage * amountPerPage\r\n  const indexOfFirstPage = indexOfLastPage - amountPerPage\r\n  const currentList = departmentList.slice(indexOfFirstPage, indexOfLastPage)\r\n  const totalPages = departmentList.length\r\n  const handlesPaginate = (number) => setCurrentPage(number)\r\n  const handlesAmountItem = (value) => setAmountPerPage(value)\r\n\r\n  const handlerExportPDF = () => {\r\n    const input = document.getElementById('content-department');\r\n    html2canvas(input)\r\n      .then((canvas) => {\r\n        const imgData = canvas.toDataURL('img/png');\r\n        const pdf = new jsPDF('l', 'px', 'a4');\r\n        pdf.addImage(imgData, 'PNG', 1, 1);\r\n        pdf.save(\"list-department.pdf\");\r\n      });\r\n  }\r\n  return (\r\n    <div className=\"font-medium\">\r\n      {/* header */}\r\n      <div className=\"h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\">\r\n        <div className=\"text-white flex items-center \">\r\n          <Link\r\n            to=\"create\"\r\n            className=\" bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\"\r\n          >\r\n            Tạo mới\r\n          </Link>\r\n          <button\r\n            onClick={handlerExportPDF}\r\n            className=\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\"\r\n          >\r\n            Xuất PDF\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* content */}\r\n      <div className=\"bg-white mt-5  w-full container mx-auto rounded shadow-md\">\r\n        <div className=\" border-b px-5 py-3 border-gray-300\">\r\n          <span className=\"text-xl text-violet-600\">Phòng Ban</span>\r\n        </div>\r\n        <div className=\"px-5 py-6\" id=\"content-department\">\r\n          <div className=\"px-2 pb-5 text-2xl text-gray-700\">\r\n            {totalPages} Phòng ban\r\n          </div>\r\n          <ul className=\"grid grid-cols-4 gap-10 text-white\">\r\n            {currentList.map(item => {\r\n              return (\r\n                <li key={item.id} className=\"w-64 divide-y bg-gray-100 shadow\">\r\n                  <Link to={`${item.id}/detail`}>\r\n                    <div className=\"bg-gray-500 text-lg px-3 py-2 flex justify-between items-center\">\r\n                      <span>{item.name}</span>\r\n                      <span className={`${item.status ? \"bg-green-400\" : \"bg-rose-500\"} inline-flex rounded-full h-4 w-4 `}></span>\r\n                    </div>\r\n                    <div className=\"text-gray-800 font-normal px-3 py-2 flex justify-between\"> <span>Số điện thoại</span> <span>{item.phone}</span>  </div>\r\n                    <div className=\"text-gray-800 font-normal px-3 py-2 flex justify-between\"> <span>Số lượng nhân viên</span> <span>{item.count}</span>  </div>\r\n                    <div className=\"text-gray-800 font-normal px-3 py-2 flex justify-between\"> <span>Quản lý</span> <span>{item.department_name}</span>  </div>\r\n                  </Link>\r\n                </li>\r\n              )\r\n            }\r\n            )}\r\n          </ul>\r\n          <div className=\"mt-4\">\r\n            <Pagination\r\n              amountPerPage={amountPerPage}\r\n              currentPage={currentPage}\r\n              totalPages={totalPages}\r\n              paginate={handlesPaginate}\r\n              amountItem={handlesAmountItem}\r\n            />\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DepartmentPage"]},"metadata":{},"sourceType":"module"}