{"ast":null,"code":"import _slicedToArray from\"C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{fetchEmployees}from'../../redux/actions/employeeAct';import{detailDeparment}from'../../redux/actions/departmentAction';import Pagination from'../../components/pagination/Pagination';import TableView from\"../../components/table/tableView\";import html2canvas from'html2canvas';import jsPDF from'jspdf';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DepartmentDetail(){var _useParams=useParams(),departmentId=_useParams.departmentId;var navigate=useNavigate();var listEmployee=useSelector(function(state){return state.employees.list;}).filter(function(item){return item.department==departmentId;});var detail=useSelector(function(state){return state.departments.detail;});var dispatch=useDispatch();useEffect(function(){dispatch(fetchEmployees());dispatch(detailDeparment(departmentId));},[]);var columns=[{title:\"Mã số\",dataIndex:\"id\",key:\"id\"},{title:\"Tên nhân viên\",dataIndex:\"name\",key:\"name\"},{title:\"Số điện thoại\",dataIndex:\"phone\",key:\"phone\"},{title:\"Email\",dataIndex:\"email\",key:\"email\"}];var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),amountPerPage=_useState4[0],setAmountPerPage=_useState4[1];// Get current list\nvar indexOfLastPage=currentPage*amountPerPage;var indexOfFirstPage=indexOfLastPage-amountPerPage;var currentList=listEmployee.slice(indexOfFirstPage,indexOfLastPage);var totalPages=listEmployee.length;var handlesPaginate=function handlesPaginate(number){return setCurrentPage(number);};var handlesAmountItem=function handlesAmountItem(value){return setAmountPerPage(value);};var handlesEditItem=function handlesEditItem(){navigate(\"/department/\".concat(departmentId,\"/edit\"));};var handlerExportPDF=function handlerExportPDF(){var input=document.getElementById('content-department-detail');html2canvas(input).then(function(canvas){var imgData=canvas.toDataURL('img/png');var pdf=new jsPDF('l','pt','a4');pdf.addImage(imgData,'PNG',1,1);pdf.save(\"department-detail-id-\".concat(departmentId,\".pdf\"));});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-white flex items-center \",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlesEditItem,className:\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\",children:\"S\\u1EEDa\"}),/*#__PURE__*/_jsx(\"button\",{className:\"font-medium bg-rose-500 px-2 py-1  hover:bg-rose-600 ml-2\",children:\"Xo\\xE1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlerExportPDF,className:\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\",children:\"Xu\\u1EA5t PDF\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white mt-5 w-full container mx-auto rounded shadow-md\",id:\"content-department-detail\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" border-b px-5 py-3 border-gray-300\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xl text-violet-600\",children:\"Chi ti\\u1EBFt ph\\xF2ng ban\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 border-b border-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-4 bg-violet-600 text-xl text-white px-3 py-2 flex justify-center items-center font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{className:\" font-normal mr-2\",children:\"T\\xEAn ph\\xF2ng:\"}),/*#__PURE__*/_jsx(\"span\",{children:detail.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-2 col-span-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\" font-normal mr-2\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i :\"}),/*#__PURE__*/_jsx(\"span\",{children:detail.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-2 col-span-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\" font-normal mr-2\",children:\"Qu\\u1EA3n l\\xFD :\"}),/*#__PURE__*/_jsx(\"span\",{children:detail.department_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-5 text-2xl text-gray-700 font-medium\",children:[totalPages,\" nh\\xE2n vi\\xEAn\"]}),/*#__PURE__*/_jsx(TableView,{datas:currentList,columns:columns}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Pagination,{amountPerPage:amountPerPage,currentPage:currentPage,totalPages:totalPages,paginate:handlesPaginate,amountItem:handlesAmountItem})})]})]})]});}export default DepartmentDetail;","map":{"version":3,"sources":["C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/src/pages/department/DepartmentDetail.js"],"names":["useEffect","useState","useNavigate","useParams","useSelector","useDispatch","fetchEmployees","detailDeparment","Pagination","TableView","html2canvas","jsPDF","DepartmentDetail","departmentId","navigate","listEmployee","state","employees","list","filter","item","department","detail","departments","dispatch","columns","title","dataIndex","key","currentPage","setCurrentPage","amountPerPage","setAmountPerPage","indexOfLastPage","indexOfFirstPage","currentList","slice","totalPages","length","handlesPaginate","number","handlesAmountItem","value","handlesEditItem","handlerExportPDF","input","document","getElementById","then","canvas","imgData","toDataURL","pdf","addImage","save","name","phone","department_name"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { fetchEmployees } from '../../redux/actions/employeeAct'\r\nimport { detailDeparment } from '../../redux/actions/departmentAction'\r\nimport Pagination from '../../components/pagination/Pagination';\r\nimport TableView from \"../../components/table/tableView\";\r\nimport html2canvas from 'html2canvas';\r\nimport jsPDF from 'jspdf';\r\n\r\nfunction DepartmentDetail() {\r\n  const { departmentId } = useParams();\r\n  const navigate = useNavigate()\r\n  const listEmployee = useSelector(state => state.employees.list).filter(item => item.department == departmentId)\r\n  const detail = useSelector(state => state.departments.detail)\r\n\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    dispatch(fetchEmployees())\r\n    dispatch(detailDeparment(departmentId))\r\n  }, [])\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Mã số\",\r\n      dataIndex: \"id\",\r\n      key: \"id\",\r\n    },\r\n    {\r\n      title: \"Tên nhân viên\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      dataIndex: \"phone\",\r\n      key: \"phone\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n    },\r\n  ];\r\n\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [amountPerPage, setAmountPerPage] = useState(10)\r\n  // Get current list\r\n  const indexOfLastPage = currentPage * amountPerPage\r\n  const indexOfFirstPage = indexOfLastPage - amountPerPage\r\n  const currentList = listEmployee.slice(indexOfFirstPage, indexOfLastPage)\r\n  const totalPages = listEmployee.length\r\n  const handlesPaginate = (number) => setCurrentPage(number)\r\n  const handlesAmountItem = (value) => setAmountPerPage(value)\r\n  const handlesEditItem = () => { navigate(`/department/${departmentId}/edit`) }\r\n\r\n  const handlerExportPDF = () => {\r\n    const input = document.getElementById('content-department-detail');\r\n    html2canvas(input)\r\n      .then((canvas) => {\r\n        const imgData = canvas.toDataURL('img/png');\r\n        const pdf = new jsPDF('l', 'pt', 'a4');\r\n        pdf.addImage(imgData, 'PNG', 1, 1);\r\n        pdf.save(`department-detail-id-${departmentId}.pdf`);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"font-medium h-12 text-sm bg-slate-200 flex justify-end items-center px-5 shadow border-b border-gray-300\">\r\n        <div className=\"text-white flex items-center \">\r\n          <button\r\n            onClick={handlesEditItem}\r\n            className=\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\"\r\n          >\r\n            Sửa\r\n          </button>\r\n          <button\r\n            className=\"font-medium bg-rose-500 px-2 py-1  hover:bg-rose-600 ml-2\"\r\n          >\r\n            Xoá\r\n          </button >\r\n          <button\r\n            onClick={handlerExportPDF}\r\n            className=\"font-medium bg-violet-500 px-2 py-1  hover:bg-violet-600 ml-2\"\r\n          >\r\n            Xuất PDF\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* content */}\r\n      <div className=\"bg-white mt-5 w-full container mx-auto rounded shadow-md\" id=\"content-department-detail\">\r\n        {/* \"header name\" */}\r\n        <div className=\" border-b px-5 py-3 border-gray-300\">\r\n          <span className=\"font-medium text-xl text-violet-600\">Chi tiết phòng ban</span>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-4 gap-4 border-b border-gray-300\">\r\n          <div className=\"col-span-4 bg-violet-600 text-xl text-white px-3 py-2 flex justify-center items-center font-medium\">\r\n            <span className=\" font-normal mr-2\">Tên phòng:</span>\r\n            <span>{detail.name}</span>\r\n          </div>\r\n          <div className=\"px-5 py-2 col-span-2\">\r\n            <span className=\" font-normal mr-2\">Số điện thoại :</span>\r\n            <span>{detail.phone}</span>\r\n          </div>\r\n          <div className=\"px-5 py-2 col-span-2\">\r\n            <span className=\" font-normal mr-2\">Quản lý :</span>\r\n            <span>{detail.department_name}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"px-5 py-6\">\r\n          <div className=\"px-2 pb-5 text-2xl text-gray-700 font-medium\">\r\n            {totalPages} nhân viên\r\n          </div>\r\n          <TableView datas={currentList} columns={columns} />\r\n          <div className=\"mt-4\">\r\n            <Pagination\r\n              amountPerPage={amountPerPage}\r\n              currentPage={currentPage}\r\n              totalPages={totalPages}\r\n              paginate={handlesPaginate}\r\n              amountItem={handlesAmountItem}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DepartmentDetail"]},"metadata":{},"sourceType":"module"}