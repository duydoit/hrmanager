{"ast":null,"code":"import{USER_LOADED,USER_LOADING,GET_ALERT,LOGIN_SUCCESS,LOGOUT_SUCCESS}from'./types';import userAPI from'../../api/userApi';import jwtDecode from'jwt-decode';//signUp\nexport var loginUser=function loginUser(user){return function(dispatch){userAPI.login(user).then(function(response){localStorage.setItem(\"access_token\",response['jwt_token']);dispatch({type:LOGIN_SUCCESS,payload:response});dispatch({type:GET_ALERT,payload:{msg:\"Welcome to HRManager !\"}});}).catch(function(error){dispatch({type:GET_ALERT,payload:{msg:\"Vui lòng thử lại username/password !\"}});});};};export var loadUser=function loadUser(){return function(dispatch,getState){var token=getState().auth.token;if(token){var user=jwtDecode(token);dispatch({type:USER_LOADED,payload:{token:token,user:user}});}else{dispatch({type:USER_LOADING,payload:null});}};};export var signOut=function signOut(){return function(dispatch){dispatch({type:LOGOUT_SUCCESS,payload:null});};};","map":{"version":3,"sources":["C:/Users/anhdu/OneDrive/Desktop/HrManager/hrmanager/template/src/redux/actions/authActions.js"],"names":["USER_LOADED","USER_LOADING","GET_ALERT","LOGIN_SUCCESS","LOGOUT_SUCCESS","userAPI","jwtDecode","loginUser","user","dispatch","login","then","response","localStorage","setItem","type","payload","msg","catch","error","loadUser","getState","token","auth","signOut"],"mappings":"AAAA,OACIA,WADJ,CAEIC,YAFJ,CAGIC,SAHJ,CAIIC,aAJJ,CAKIC,cALJ,KAMO,SANP,CAQA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA;AACA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,QAAU,UAACC,QAAD,CAAc,CAC7CJ,OAAO,CAACK,KAAR,CAAcF,IAAd,EAAoBG,IAApB,CACI,SAAAC,QAAQ,CAAI,CACRC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCF,QAAQ,CAAC,WAAD,CAA7C,EACAH,QAAQ,CAAC,CACLM,IAAI,CAAEZ,aADD,CAELa,OAAO,CAAEJ,QAFJ,CAAD,CAAR,CAIAH,QAAQ,CAAC,CACLM,IAAI,CAAEb,SADD,CAELc,OAAO,CAAE,CAAEC,GAAG,CAAE,wBAAP,CAFJ,CAAD,CAAR,CAIH,CAXL,EAYEC,KAZF,CAYQ,SAAAC,KAAK,CAAI,CACbV,QAAQ,CAAC,CACLM,IAAI,CAAEb,SADD,CAELc,OAAO,CAAE,CAAEC,GAAG,CAAE,sCAAP,CAFJ,CAAD,CAAR,CAIH,CAjBD,EAkBH,CAnBwB,EAAlB,CAqBP,MAAO,IAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAM,UAACX,QAAD,CAAWY,QAAX,CAAwB,CAClD,GAAMC,CAAAA,KAAK,CAAGD,QAAQ,GAAGE,IAAX,CAAgBD,KAA9B,CACA,GAAIA,KAAJ,CAAW,CACP,GAAMd,CAAAA,IAAI,CAAGF,SAAS,CAACgB,KAAD,CAAtB,CACAb,QAAQ,CAAC,CACLM,IAAI,CAAEf,WADD,CAELgB,OAAO,CAAE,CAAEM,KAAK,CAALA,KAAF,CAASd,IAAI,CAAJA,IAAT,CAFJ,CAAD,CAAR,CAIH,CAND,IAMO,CACHC,QAAQ,CAAC,CACLM,IAAI,CAAEd,YADD,CAELe,OAAO,CAAE,IAFJ,CAAD,CAAR,CAIH,CAEJ,CAfuB,EAAjB,CAiBP,MAAO,IAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,SAAM,UAACf,QAAD,CAAc,CACvCA,QAAQ,CAAC,CACLM,IAAI,CAAEX,cADD,CAELY,OAAO,CAAE,IAFJ,CAAD,CAAR,CAIH,CALsB,EAAhB","sourcesContent":["import {\r\n    USER_LOADED,\r\n    USER_LOADING,\r\n    GET_ALERT,\r\n    LOGIN_SUCCESS,\r\n    LOGOUT_SUCCESS,\r\n} from './types'\r\n\r\nimport userAPI from '../../api/userApi'\r\nimport jwtDecode from 'jwt-decode'\r\n//signUp\r\nexport const loginUser = (user) => (dispatch) => {\r\n    userAPI.login(user).then(\r\n        response => {\r\n            localStorage.setItem(\"access_token\", response['jwt_token'])\r\n            dispatch({\r\n                type: LOGIN_SUCCESS,\r\n                payload: response\r\n            });\r\n            dispatch({\r\n                type: GET_ALERT,\r\n                payload: { msg: \"Welcome to HRManager !\" }\r\n            })\r\n        }\r\n    ).catch(error => {\r\n        dispatch({\r\n            type: GET_ALERT,\r\n            payload: { msg: \"Vui lòng thử lại username/password !\" }\r\n        })\r\n    })\r\n}\r\n\r\nexport const loadUser = () => (dispatch, getState) => {\r\n    const token = getState().auth.token\r\n    if (token) {\r\n        const user = jwtDecode(token)\r\n        dispatch({\r\n            type: USER_LOADED,\r\n            payload: { token, user }\r\n        })\r\n    } else {\r\n        dispatch({\r\n            type: USER_LOADING,\r\n            payload: null,\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const signOut = () => (dispatch) => {\r\n    dispatch({\r\n        type: LOGOUT_SUCCESS,\r\n        payload: null,\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}